"use strict";const e=require("../../common/vendor.js"),a=require("../../data/herbData.js"),u=require("../../common/assets.js"),h={data(){return{placeholderIndex:0,placeholders:a.nameData,timer:null,showPlaceholder:!0,animationDirection:"slide-top",isAnimating:!1,transitionStyles:{display:"flex",alignItems:"center",height:"100%",width:"100%"},inputValue:"",matchedItems:[],isFocused:!1,isSelecting:!1,inputTimer:null}},computed:{currentPlaceholder(){return a.nameData[this.placeholderIndex]}},methods:{handleFocus(){this.pauseRotation(),this.isFocused=!0,this.inputValue&&this.filterSuggestions()},handleBlur(){setTimeout(()=>{this.$refs.searchInput&&!this.isSelecting&&this.$refs.searchInput.blur(),this.resumeRotation()},300)},handleInput(s){this.inputValue=s.detail.value,clearTimeout(this.inputTimer),this.inputTimer=setTimeout(()=>{this.filterSuggestions()},300)},filterSuggestions(){if(!this.inputValue){this.matchedItems=[];return}const s=this.inputValue.toLowerCase();this.matchedItems=a.nameData.filter(r=>r.toLowerCase().includes(s))},selectItem(s){this.isSelecting=!0,this.inputValue=s,this.matchedItems=[],this.inputKey=Date.now(),this.performSearch()},performSearch(){this.inputValue&&(e.index.__f__("log","at components/my-search-bar/my-search-bar.vue:132","执行搜索：",this.inputValue),e.index.navigateTo({url:`/pages/content/content?keyword=${encodeURIComponent(this.inputValue)}`}),this.inputValue="")},startRotation(){this.timer=setInterval(()=>{this.isAnimating||(this.isAnimating=!0,this.animationDirection="slide-top",this.showPlaceholder=!1,setTimeout(()=>{this.placeholderIndex=(this.placeholderIndex+1)%this.placeholders.length,this.showPlaceholder=!0,setTimeout(()=>{this.isAnimating=!1},300)},300))},3e3)},pauseRotation(){clearInterval(this.timer)},resumeRotation(){this.pauseRotation(),this.startRotation()}},mounted(){this.startRotation()},beforeUnmount(){this.pauseRotation()}};Array||e.resolveComponent("uni-transition")();const l=()=>"../../uni_modules/uni-transition/components/uni-transition/uni-transition.js";Math||l();function c(s,r,d,p,n,i){return e.e({a:u._imports_0$2,b:e.o((...t)=>i.handleFocus&&i.handleFocus(...t)),c:e.o((...t)=>i.handleBlur&&i.handleBlur(...t)),d:e.o([t=>n.inputValue=t.detail.value,(...t)=>i.handleInput&&i.handleInput(...t)]),e:n.isAnimating,f:i.currentPlaceholder,g:n.inputValue,h:e.p({show:n.showPlaceholder,duration:300,"mode-class":n.animationDirection,styles:n.transitionStyles}),i:e.o((...t)=>i.performSearch&&i.performSearch(...t)),j:n.matchedItems.length>0},n.matchedItems.length>0?{k:e.f(n.matchedItems,(t,o,f)=>({a:e.t(t),b:o,c:e.o(_=>i.selectItem(t),o)}))}:{})}const m=e._export_sfc(h,[["render",c],["__scopeId","data-v-2ee9d3dd"]]);wx.createComponent(m);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/my-search-bar/my-search-bar.js.map
