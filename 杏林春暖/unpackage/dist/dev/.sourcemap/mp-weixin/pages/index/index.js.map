{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n\t<view class=\"page-container\">  \r\n\t\t<my-nav-bar :title=\"'中医药大全'\"></my-nav-bar>\r\n\t\t<!-- 监听滚动事件，使用.passive避免阻塞滚动。动态设置高度 -->\r\n\t\t<view class=\"page-container\" @scroll.passive =\"handleMainScroll\" :style=\"{height: scrollViewHeight+'px'}\">\n\t\t\t<view class=\"header-area\">\r\n\t\t\t\t<my-search-bar ref=\"searchBar\"></my-search-bar>\n\t\t\t\t<my-carousel-bar ref=\"carousel\"></my-carousel-bar>\n\t\t\t</view>\r\n\t\t\t\t<my-container-bar></my-container-bar>\r\n\t\t\t\t<!-- buffer-size=30优化渲染性能 -->\n\t\t\t\t<my-content-bar ref=\"content\" :buffer-size=\"30\" class=\"content-box\">\r\n\t\t\t\t</my-content-bar>\n\t\t</view>\r\n\t\t<my-topButton-bar  \r\n\t\t\t:showBackToTop=\"showBackToTop\" \n\t\t\t@back-to-top=\"handleBackToTop\">\r\n\t\t</my-topButton-bar>\r\n\t\t<my-tab-bar></my-tab-bar>\n\t</view>\n</template>\n\n<script>\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t   scrollTop: 0,           // 当前滚动位置\r\n\t\t\t   showBackToTop: false,   // 控制返回顶部按钮显示\r\n\t\t\t   scrollViewHeight: 0,    // 滚动容器高度\r\n\t\t\t   lastScrollTime: 0,\t   // 滚动事件节流控制\r\n\t\t\t   navTotalHeight:44\r\n\t\t\t};\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t    // 确保页面加载时在顶部\r\n\t\t    this.scrollTop = 0;\r\n\t\t\t\r\n\t\t\tconst systemInfo = uni.getSystemInfoSync();\r\n\t\t\tthis.scrollViewHeight = systemInfo.windowHeight - this.navTotalHeight;\r\n\t\t\t\r\n\t\t\t// 计算滚动容器高度\r\n\t\t    this.calculateScrollViewHeight();\r\n\t\t},\n\t\tmethods: {\r\n\t\t\t// 计算滚动容器高度\r\n\t\t\tcalculateScrollViewHeight() {\r\n\t\t\t\t// 获取设备信息\r\n\t\t\t\tconst systemInfo = uni.getSystemInfoSync();\r\n\t\t\t\t// 设置为屏幕高度\r\n\t\t\t\tthis.scrollViewHeight = systemInfo.windowHeight;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 滚动事件处理\n\t\t\thandleMainScroll(e) {\r\n\t\t\t\t// 获取当前滚动位置\r\n\t\t\t    const scrollTop = e.detail.scrollTop;\r\n\t\t\t\t// 添加节流控制\r\n\t\t\t\tconst now = Date.now();\r\n\t\t\t\tif (now - this.lastScrollTime < 100) return;\r\n\t\t\t\tthis.lastScrollTime = now;\r\n\t\t\t\t   \r\n\t\t\t\t// 滚动超过150px显示返回按钮\r\n\t\t\t\tthis.showBackToTop = scrollTop > 150;\r\n\t\t\t\t\t\r\n\t\t\t\t// 调试输出\r\n\t\t\t\tconsole.log(`滚动位置: ${scrollTop}, 显示状态: ${this.showBackToTop}`);\r\n\t\t\t\t// 更新当前滚动位置\r\n\t\t\t\tthis.scrollTop = scrollTop;\r\n\t\t\t\tthis.lastScrollPosition = scrollTop;\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 返回顶部操作\r\n\t\t\thandleBackToTop() {\r\n\t\t\t\t//重置滚动位置\r\n\t\t\t\tthis.scrollTop = 0;\r\n\t\t\t\t// 隐藏按钮\r\n\t\t\t\tthis.showBackToTop = false;\r\n\t\t\t\t// 双保险策略，同时使用数据绑定+API调用以解决真机兼容性问题\r\n\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t    scrollTop: 0,\r\n\t\t\t\t    duration: 360,\r\n\t\t\t\t    success: () => this.showBackToTop = false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\n\t};\n</script>\n\n<style scoped>\n\t.page-container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\r\n\t\tbackground-color: #e4e4e4;\r\n\t\theight: calc(100vh - var(--nav-total-height)); /* 动态高度 */\n\t}\r\n\t\n\t.content-container {\n\t\toverflow: auto;\r\n\t\tflex:1;\r\n\t\ttransform: translateZ(0); /* 开启GPU加速 */\n\t}\r\n\t\r\n\t.header-area {\r\n\t\tbackground-color: #e4e4e4;\r\n\t}\r\n\t\r\n\t.content-box{\r\n\t\tpadding-top: 10rpx;\r\n\t\tbackground: linear-gradient(135deg, #f8f4e5, #e8f5e9);\r\n\t}\n</style>","import MiniProgramPage from 'D:/xiaochengxu/project-space/uni-杏林春暖/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","systemInfo","uni","scrollTop","now","MiniProgramPage"],"mappings":"uDAuBMA,EAAU,CACd,MAAO,CACN,MAAO,CACJ,UAAW,EACX,cAAe,GACf,iBAAkB,EAClB,eAAgB,EAChB,eAAe,GAElB,EACD,SAAU,CAEN,KAAK,UAAY,EAEpB,MAAMC,EAAaC,QAAI,oBACvB,KAAK,iBAAmBD,EAAW,aAAe,KAAK,eAGpD,KAAK,0BAAyB,CACjC,EACD,QAAS,CAER,2BAA4B,CAE3B,MAAMA,EAAaC,QAAI,oBAEvB,KAAK,iBAAmBD,EAAW,YACnC,EAGD,iBAAiB,EAAG,CAEhB,MAAME,EAAY,EAAE,OAAO,UAExBC,EAAM,KAAK,MACbA,EAAM,KAAK,eAAiB,MAChC,KAAK,eAAiBA,EAGtB,KAAK,cAAgBD,EAAY,IAGjCD,EAAAA,MAAY,MAAA,MAAA,8BAAA,SAASC,CAAS,WAAW,KAAK,aAAa,EAAE,EAE7D,KAAK,UAAYA,EACjB,KAAK,mBAAqBA,EAE1B,EAGD,iBAAkB,CAEjB,KAAK,UAAY,EAEjB,KAAK,cAAgB,GAErBD,EAAAA,MAAI,aAAa,CACb,UAAW,EACX,SAAU,IACV,QAAS,IAAM,KAAK,cAAgB,EACxC,CAAC,CACF,CACD,8mCCpFF,GAAG,WAAWG,CAAe"}