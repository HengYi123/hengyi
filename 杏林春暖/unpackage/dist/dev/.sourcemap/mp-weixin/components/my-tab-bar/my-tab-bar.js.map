{"version":3,"file":"my-tab-bar.js","sources":["components/my-tab-bar/my-tab-bar.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDoveGlhb2NoZW5neHUvcHJvamVjdC1zcGFjZS91bmkt5p2P5p6X5pil5pqWL2NvbXBvbmVudHMvbXktdGFiLWJhci9teS10YWItYmFyLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"custom-tab-bar\">\n    <view \n      v-for=\"(item, index) in tabList\" \n      :key=\"index\"\n      class=\"tab-item\"\n      @click=\"switchTab(item,index)\"\n    >\n      <image \n\t\tclass=\"tab-item-image\"\n\t\t:src=\"currentTab === index ? item.selectedIcon : item.icon\" />\n      <text :class=\"{ active: currentTab === index }\">{{ item.text }}</text>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      currentTab: 0,\n      tabList: [\n        {\n          pagePath: \"/pages/index/index\",\n          icon: \"/static/button/首页01.png\",\n          selectedIcon: \"/static/button/首页02.png\",\n          text: \"首页\"\n        },\n        {\n          pagePath: \"/pages/shoppingCart/shoppingCart\",\n          icon: \"/static/button/购物车01.png\",\n          selectedIcon: \"/static/button/购物车02.png\",\n          text: \"购物车\"\n        },\n        {\n          pagePath: \"/pages/my/my\",\n          icon: \"/static/button/用户01.png\",\n          selectedIcon: \"/static/button/用户02.png\",\n          text: \"我的\"\n        }\n      ]\n    };\n  },\n  mounted(){\n\t\t// 监听全局页面显示事件\n\t\tuni.$on('tab-page-show',this.onTabPageShow);\n\t\t// 初始化时设置当前选中项\n\t\tthis.updateActiveTab();\n  },\n  beforeDestroy() {\n\t\t// 组件销毁时移除监听\n\t\tuni.$off('tab-page-show', this.onTabPageShow);\n    },\n  methods: {\n    switchTab(item,index) {\n\t\t// 立即更新UI响应\n\t\tthis.currentTab = index;\n\t\tuni.reLaunch({ \n\t\t    url: item.pagePath\n\t\t});\n    },\n\tonTabPageShow(route) {\n\t    if (!route) return; // 确保路由存在\n\t        \n\t\t// 路径格式处理 (去掉前面的 \"/\")\n\t\tconst path = route.startsWith('/') ? route : `/${route}`;\n\t\t\n\t\tif (!targetPath.startsWith('/pages')) {\n\t\t    targetPath = `/${targetPath}`;\n\t\t}\n\t\t\n\t\t// 匹配当前路径对应的tab索引\n\t\tconst index = this.tabList.findIndex(item => \n\t\t  item.pagePath === path || \n\t\t  item.pagePath === `/${path}`\n\t\t);\n\t\t\n\t\tif (index !== -1) this.currentTab = index;\n\t},\n\tupdateActiveTab() {\n\t    // 获取当前页面路径\n\t    const pages = getCurrentPages();\n\t    if (!pages.length) return;\n\t    const currentRoute = '/' + pages[pages.length - 1].route;\n\t      \n\t    // 匹配当前路径对应的tab索引\n\t    const activeIndex = this.tabList.findIndex(\n\t\t\titem => item.pagePath === currentRoute\n\t    );\n\t    if (activeIndex !== -1) this.currentTab = activeIndex;\n\t}\n  }\n};\n</script>\n\n<style scoped>\n.custom-tab-bar {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding-bottom: env(safe-area-inset-bottom); /* 适配全面屏手机 */\n  height: 50px;\n  background-color: #f8f8f8;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-top: 2px solid #e5e5e5;\n}\n\n.tab-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.tab-item-image {\n  width: 24px;\n  height: 24px;\n  margin-bottom: 2px;\n}\n\n.active {\n  color: #007aff;\n}\n</style>","import Component from 'D:/xiaochengxu/project-space/uni-杏林春暖/components/my-tab-bar/my-tab-bar.vue'\nwx.createComponent(Component)"],"names":["_sfc_main","uni","item","index","route","path","pages","currentRoute","activeIndex","Component"],"mappings":"uDAiBKA,EAAU,CACb,MAAO,CACL,MAAO,CACL,WAAY,EACZ,QAAS,CACP,CACE,SAAU,qBACV,KAAM,0BACN,aAAc,0BACd,KAAM,IACP,EACD,CACE,SAAU,mCACV,KAAM,2BACN,aAAc,2BACd,KAAM,KACP,EACD,CACE,SAAU,eACV,KAAM,0BACN,aAAc,0BACd,KAAM,IACR,CACF,EAEH,EACD,SAAS,CAETC,EAAAA,MAAI,IAAI,gBAAgB,KAAK,aAAa,EAE1C,KAAK,gBAAe,CACnB,EACD,eAAgB,CAEhBA,EAAAA,MAAI,KAAK,gBAAiB,KAAK,aAAa,CACzC,EACH,QAAS,CACP,UAAUC,EAAKC,EAAO,CAExB,KAAK,WAAaA,EAClBF,EAAAA,MAAI,SAAS,CACT,IAAKC,EAAK,QACd,CAAC,CACE,EACJ,cAAcE,EAAO,CACjB,GAAI,CAACA,EAAO,OAGf,MAAMC,EAAOD,EAAM,WAAW,GAAG,EAAIA,EAAQ,IAAIA,CAAK,GAEjD,WAAW,WAAW,QAAQ,IAC/B,WAAa,IAAI,UAAU,IAI/B,MAAMD,EAAQ,KAAK,QAAQ,UAAUD,GACnCA,EAAK,WAAaG,GAClBH,EAAK,WAAa,IAAIG,CAAI,IAGxBF,IAAU,KAAI,KAAK,WAAaA,EACpC,EACD,iBAAkB,CAEd,MAAMG,EAAQ,kBACd,GAAI,CAACA,EAAM,OAAQ,OACnB,MAAMC,EAAe,IAAMD,EAAMA,EAAM,OAAS,CAAC,EAAE,MAG7CE,EAAc,KAAK,QAAQ,UACnCN,GAAQA,EAAK,WAAaK,GAEpBC,IAAgB,KAAI,KAAK,WAAaA,EAC9C,CACC,CACF,wPC3FA,GAAG,gBAAgBC,CAAS"}