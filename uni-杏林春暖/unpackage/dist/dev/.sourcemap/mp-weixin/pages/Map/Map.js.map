{"version":3,"file":"map.js","sources":["pages/map/map.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWFwL21hcC52dWU"],"sourcesContent":["<template>\r\n\t<!-- 返回按钮 -->\r\n\t<view class=\"back\" @click=\"goBack\">\r\n\t\t<image src=\"/static/tabbar/返回.png\" class=\"back-image\"></image>\r\n\t</view>\r\n\t<!-- 地图容器 -->\r\n\t<map \r\n\t\tid=\"myMap\"\r\n\t\tclass=\"map-container\"\r\n\t\t:latitude=\"latitude\"\r\n\t\t:longitude=\"longitude\"\r\n\t\t:markers=\"markers\"\r\n\t\t:show-location=\"true\"\r\n\t\t:controls=\"controls\"\r\n\t\t@controltap=\"onControlTap\"\r\n\t></map>\r\n\t\r\n\t<!-- 定位按钮 -->\r\n\t<view class=\"locate-btn\" @click=\"startLocation\">\r\n\t\t<image src=\"/static/map/定位.png\" class=\"locate-image\"></image>\r\n\t</view>\r\n\t\r\n\t<!-- 地址显示栏 -->\r\n\t<view class=\"address-bar\" @click=\"openSearchPopup\">\r\n\t\t<image src=\"/static/map/location-pin.png\" class=\"address-icon\"></image>\r\n\t\t<text class=\"address-text\">{{ currentAddress || '点击搜索或定位...' }}</text>\r\n\t</view>\r\n\t\r\n\t<!-- 搜索弹窗 -->\r\n\t<uni-popup ref=\"searchPopup\" type=\"dialog\">\r\n\t\t<uni-popup-dialog \r\n\t\t\tmode=\"input\" \r\n\t\t\ttitle=\"搜索地点\" \r\n\t\t\t:value=\"searchInput\"\r\n\t\t\tplaceholder=\"请输入地址或地名\" \r\n\t\t\t@confirm=\"onSearchConfirm\"\r\n\t\t></uni-popup-dialog>\r\n\t</uni-popup>\r\n\t\r\n\t<!-- 搜索结果列表 -->\r\n\t<view class=\"search-results\" v-if=\"searchResults.length > 0\">\r\n\t\t<scroll-view class=\"results-scroll\" scroll-y>\r\n\t\t\t<view \r\n\t\t\t\tv-for=\"(item, index) in searchResults\" \r\n\t\t\t\t:key=\"index\" \r\n\t\t\t\tclass=\"result-item\"\r\n\t\t\t\t@click=\"selectSearchResult(item)\"\r\n\t\t\t>\r\n\t\t\t\t<text class=\"result-title\">{{ item.title }}</text>\r\n\t\t\t\t<text class=\"result-address\">{{ item.address }}</text>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t<view class=\"close-results\" @click=\"clearSearchResults\">关闭</view>\r\n\t</view>\r\n\t\r\n\t<!-- 地图水印 -->\r\n\t<view class=\"map-watermark\">\r\n\t\t<text>腾讯地图</text>\r\n\t\t<text>©2025 Tencent · GS(2023)1171号</text>\r\n\t</view>\n</template>\n\n<script>\t\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tlatitude: 39.90923, \t\t\t\t\t// 默认北京坐标\r\n\t\t\t\tlongitude: 116.397428,\t\t\t\t\t// 初始中心经度\r\n\t\t\t\tcurrentAddress: '',\t\t\t\t\t\t// 当前地址文本\r\n\t\t\t\tmarkers: [{\t\t\t\t\t\t\t\t// 标记点配置\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\tlatitude: 39.90923,\r\n\t\t\t\t\tlongitude: 116.397428,\r\n\t\t\t\t\ticonPath: '/static/map/pin.png',\t// 标记图标\r\n\t\t\t\t\twidth: 30,\t\t\t\r\n\t\t\t\t\theight: 40,\r\n\t\t\t\t\tcallout: {\t\t\t\t\t\t\t// 标记点气泡\r\n\t\t\t\t\t\tcontent: '当前位置',\r\n\t\t\t\t\t\tcolor: '#fff',\r\n\t\t\t\t\t\tbgColor: '#1A73E8',\r\n\t\t\t\t\t\tpadding: 8,\r\n\t\t\t\t\t\tborderRadius: 4,\r\n\t\t\t\t\t\tdisplay: 'ALWAYS'\t\t\t\t// 常显气泡\r\n\t\t\t\t\t}\r\n\t\t\t\t}],\r\n\t\t\t\tcontrols: [{ \t\t\t\t\t\t\t\n\t\t\t\t\tid: 1,\n\t\t\t\t\tposition: {\n\t\t\t\t\t\tleft: 10,\n\t\t\t\t\t\ttop: 100,\n\t\t\t\t\t\twidth: 40,\n\t\t\t\t\t\theight: 40\n\t\t\t\t\t},\n\t\t\t\t\ticonPath: '/static/map/定位.png',\n\t\t\t\t\tclickable: true\n\t\t\t\t}],\t\t\t\t\t\t\t\t\t\t// 地图控件数组\r\n\t\t\t\tsourcePage:'',\t\t\t\t\t\t\t// 页面来源标识\r\n\t\t\t\tsearchInput:'',\t\t\t\t\t\t\t// 输入要搜索的值\r\n\t\t\t\tsearchResults: [], \t\t\t\t\t\t// 搜索结果列表\r\n\t\t\t\tmapContext: null, \t\t\t\t\t\t// 地图上下文\r\n\t\t\t\thasLocationPermission: false\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tonLoad(options){\r\n\t\t\t// 记录来源页面\r\n\t\t\tthis.sourcePage = options.sourcePage || '';\t\r\n\t\t\t// 页面加载即定位\r\n\t\t\tthis.checkLocationPermission(); \t\t\t\r\n\t\t},\r\n\t\t\r\n\t\tonReady(){\r\n\t\t\t// 创建地图实例\r\n\t\t\tthis.mapContext = uni.createMapContext('myMap',this);\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t// 控件点击事件 - 添加定位功能\r\n\t\t\tonControlTap(e) {\r\n\t\t\t\tif (e.controlId === 1) {\r\n\t\t\t\t\t// 点击定位控件时触发定位\r\n\t\t\t\t\tthis.startLocation();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 打开搜索弹窗\r\n\t\t\topenSearchPopup() {\r\n\t\t\t\tthis.$refs.searchPopup.open();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 搜索确认\r\n\t\t\tonSearchConfirm(value) {\r\n\t\t\t\tthis.searchInput = value;\r\n\t\t\t\tthis.$refs.searchPopup.close();\r\n\t\t\t\t\r\n\t\t\t\tif (!this.searchInput.trim()) {\r\n\t\t\t\t\tuni.showToast({ title: '请输入搜索关键词', icon: 'none' });\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 执行搜索\r\n\t\t\t\tthis.performSearch(this.searchInput);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 执行搜索\r\n\t\t\tasync performSearch(keyword) {\r\n\t\t\t\tuni.showLoading({ title: '搜索中...', mask: true });\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 使用腾讯地图地点搜索API[1](@ref)\r\n\t\t\t\t\tconst res = await uni.request({\r\n\t\t\t\t\t\turl: 'https://apis.map.qq.com/ws/place/v1/search',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tkey: 'OMEBZ-JYNEW-BX6RJ-Y63WC-JS4BE-4SB6C', // 您的腾讯地图key\r\n\t\t\t\t\t\t\tkeyword: keyword,\r\n\t\t\t\t\t\t\tboundary: `region(北京,0)`, // 搜索范围-北京\r\n\t\t\t\t\t\t\tpage_size: 20 // 返回结果数量\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (res.data.status === 0) {\r\n\t\t\t\t\t\tthis.searchResults = res.data.data || [];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (this.searchResults.length === 0) {\r\n\t\t\t\t\t\t\tuni.showToast({ title: '未找到相关地点', icon: 'none' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({ title: `搜索失败: ${res.data.message}`, icon: 'none' });\r\n\t\t\t\t\t\tconsole.error('腾讯地图搜索API错误:', res.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tuni.showToast({ title: '搜索请求异常', icon: 'none' });\r\n\t\t\t\t\tconsole.error('搜索请求异常:', error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 选择搜索结果\r\n\t\t\tselectSearchResult(item) {\r\n\t\t\t\t// 更新地图中心点\r\n\t\t\t\tthis.latitude = item.location.lat;\r\n\t\t\t\tthis.longitude = item.location.lng;\r\n\t\t\t\t\r\n\t\t\t\t// 更新标记点\r\n\t\t\t\tthis.markers[0] = {\r\n\t\t\t\t\t...this.markers[0],\r\n\t\t\t\t\tlatitude: item.location.lat,\r\n\t\t\t\t\tlongitude: item.location.lng,\r\n\t\t\t\t\tcallout: {\r\n\t\t\t\t\t\t...this.markers[0].callout,\r\n\t\t\t\t\t\tcontent: item.title\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// 移动地图视角到选中位置\r\n\t\t\t\tthis.mapContext.moveToLocation({\r\n\t\t\t\t\tlatitude: item.location.lat,\r\n\t\t\t\t\tlongitude: item.location.lng\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 创建完整的地址字符串\r\n\t\t\t\tconst fullAddress = `${item.title}（${item.address}）`;\r\n\t\t\t\t\r\n\t\t\t\t// 更新地址栏文本\r\n\t\t\t\tthis.currentAddress = fullAddress;\r\n\t\t\t\t\r\n\t\t\t\t// 将地址保存到本地存储\r\n\t\t\t\tuni.setStorageSync('selectedAddress', fullAddress);\r\n\t\t\t\t\r\n\t\t\t\t// 将选择的地址传递回 my 页面\r\n\t\t\t\tthis.returnSelectedAddress(fullAddress, item.location.lat, item.location.lng);\r\n\t\t\t\t\r\n\t\t\t\t// 清空搜索结果列表\r\n\t\t\t\tthis.clearSearchResults();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 返回选择的地址到 my 页面\r\n\t\t\treturnSelectedAddress(address, lat, lng) {\r\n\t\t\t    // 获取页面栈\r\n\t\t\t    const pages = getCurrentPages();\r\n\t\t\t    const prevPage = pages[pages.length - 2]; // 上一个页面（my页面）\r\n\t\t\t    \r\n\t\t\t    if (prevPage && prevPage.route === 'pages/my/my') {\r\n\t\t\t        // 通过页面实例直接调用方法\r\n\t\t\t        if (prevPage.$vm && prevPage.$vm.updateAddress) {\r\n\t\t\t            prevPage.$vm.updateAddress(address);\r\n\t\t\t        }\r\n\t\t\t        \r\n\t\t\t        // 通过全局事件（备用方案）\r\n\t\t\t        uni.$emit('updateUserAddress', address);\r\n\t\t\t        \r\n\t\t\t        // 返回上一页\r\n\t\t\t        setTimeout(() => {\r\n\t\t\t            uni.navigateBack({\r\n\t\t\t                delta: 1,\r\n\t\t\t                success: () => {\r\n\t\t\t                    uni.showToast({\r\n\t\t\t                        title: '地址选择成功',\r\n\t\t\t                        icon: 'success'\r\n\t\t\t                    });\r\n\t\t\t                }\r\n\t\t\t            });\r\n\t\t\t        }, 500);\r\n\t\t\t    } else {\r\n\t\t\t        // 如果不是从my页面跳转过来，提示用户手动返回\r\n\t\t\t        uni.showModal({\r\n\t\t\t            title: '地址已选择',\r\n\t\t\t            content: `已选择地址：${address}`,\r\n\t\t\t            confirmText: '确定',\r\n\t\t\t            showCancel: false\r\n\t\t\t        });\r\n\t\t\t    }\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 清空搜索结果\r\n\t\t\tclearSearchResults() {\r\n\t\t\t\tthis.searchResults = [];\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 检查定位权限状态\r\n\t\t\tcheckLocationPermission() {\r\n\t\t\t\tuni.getSetting({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.authSetting['scope.userLocation']) {\r\n\t\t\t\t\t\t  // 已有权限\r\n\t\t\t\t\t\t\tthis.hasLocationPermission = true;\r\n\t\t\t\t\t\t\tthis.doLocation(); // 直接定位\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t  // 无权限\r\n\t\t\t\t\t\t\tthis.hasLocationPermission = false;\r\n\t\t\t\t\t\t\tthis.currentAddress = '请点击定位按钮获取位置';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  },\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tthis.hasLocationPermission = false;\r\n\t\t\t\t\t\tthis.currentAddress = '权限检查失败';\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 检查定位权限状态\r\n\t\t\tcheckLocationPermission() {\r\n\t\t\t    uni.getSetting({\r\n\t\t\t      success: (res) => {\r\n\t\t\t        if (res.authSetting['scope.userLocation']) {\r\n\t\t\t          // 已有权限，直接定位\r\n\t\t\t          this.doLocation();\r\n\t\t\t        } else {\r\n\t\t\t          // 无权限，显示提示但不强制请求\r\n\t\t\t          this.currentAddress = '请点击定位按钮获取位置';\r\n\t\t\t        }\r\n\t\t\t      }\r\n\t\t\t    });\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 触发定位流程\r\n\t\t\tstartLocation() {\r\n\t\t\t    if (this.hasLocationPermission) {\r\n\t\t\t\t\t// 已有权限，直接定位\r\n\t\t\t\t\tthis.doLocation();\r\n\t\t\t\t\treturn;\r\n\t\t\t    }\r\n\t\t\t  \r\n\t\t\t\t// 请求定位权限\r\n\t\t\t\tuni.authorize({\r\n\t\t\t\t\tscope: 'scope.userLocation',\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t  this.hasLocationPermission = true;\r\n\t\t\t\t\t  this.doLocation();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t// 用户拒绝授权\r\n\t\t\t\t\t\tif (err.errMsg.indexOf('deny') !== -1) {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '权限提示',\r\n\t\t\t\t\t\t\t\tcontent: '需要位置权限才能获取当前位置，请前往设置开启权限',\r\n\t\t\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t  // 引导用户打开设置\r\n\t\t\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: (settingRes) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (settingRes.authSetting['scope.userLocation']) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.hasLocationPermission = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.doLocation();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t  title: '权限请求失败',\r\n\t\t\t\t\t\t\t  icon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 实时定位核心方法\r\n\t\t\tdoLocation() {\r\n\t\t\t    if (!this.hasLocationPermission) {\r\n\t\t\t\t\tthis.startLocation(); // 重新请求权限\r\n\t\t\t\t\treturn;\r\n\t\t\t    }\r\n\t\t\t  \r\n\t\t\t    uni.showLoading({\r\n\t\t\t\t\ttitle: '定位中...',\r\n\t\t\t\t\tmask: true\r\n\t\t\t    });\r\n\t\t\t  \r\n\t\t\t    uni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02', // 高德坐标系\r\n\t\t\t\t\taltitude: true, // 获取高度信息\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t    // 更新坐标数据\r\n\t\t\t\t\t\tthis.latitude = res.latitude;\r\n\t\t\t\t\t\tthis.longitude = res.longitude;\r\n\t\t\t\t\t  \r\n\t\t\t\t\t\t// 更新标记点\r\n\t\t\t\t\t\tthis.markers = [{\r\n\t\t\t\t\t\t\t...this.markers[0],\r\n\t\t\t\t\t\t\tlatitude: res.latitude,\r\n\t\t\t\t\t\t\tlongitude: res.longitude\r\n\t\t\t\t\t\t}];\r\n\t\t\t\t\t  \r\n\t\t\t\t\t\t// 坐标转地址（逆地理编码）\r\n\t\t\t\t\t\tthis.reverseGeocode(res.latitude, res.longitude);\r\n\t\t\t\t\t  \r\n\t\t\t\t\t\t// 移动地图视角到当前位置\r\n\t\t\t\t\t\tthis.mapContext.moveToLocation({\r\n\t\t\t\t\t\t\tlatitude: res.latitude,\r\n\t\t\t\t\t\t\tlongitude: res.longitude,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t  uni.hideLoading();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t    uni.hideLoading();\r\n\t\t\t\t\t  \r\n\t\t\t\t\t\t// 处理不同错误类型\r\n\t\t\t\t\t\tlet errorMsg = '定位失败';\r\n\t\t\t\t\t\tif (err.errMsg.indexOf('auth') !== -1) {\r\n\t\t\t\t\t\t\terrorMsg = '定位权限未开启';\r\n\t\t\t\t\t\t\tthis.hasLocationPermission = false;\r\n\t\t\t\t\t\t} else if (err.errMsg.indexOf('available') !== -1) {\r\n\t\t\t\t\t\t\terrorMsg = '定位服务不可用';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  \r\n\t\t\t\t\t    uni.showToast({ \r\n\t\t\t\t\t\t\ttitle: errorMsg, \r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t    });\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 逆地理编码\r\n\t\t\tasync reverseGeocode(lat, lng) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res = await uni.request({\r\n\t\t\t\t\t\turl: 'https://apis.map.qq.com/ws/geocoder/v1/',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t    key: 'OMEBZ-JYNEW-BX6RJ-Y63WC-JS4BE-4SB6C', // 使用你提供的密钥\r\n\t\t\t\t\t\t    location: `${lat},${lng}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (res && res.data && res.data.status === 0) {\r\n\t\t\t\t\t\t// 腾讯地图API成功响应\r\n\t\t\t\t\t\tthis.currentAddress = res.data.result.address || '地址解析成功但无详细地址';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 腾讯地图API返回错误\r\n\t\t\t\t\t\tthis.currentAddress = '地址解析失败';\r\n\t\t\t\t\t\tconsole.error('腾讯地图逆地理编码失败:', res ? res.data : error);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthis.currentAddress = '地址解析失败';\r\n\t\t\t\t\tconsole.error('逆地理编码请求异常:', e);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 控件点击事件\r\n\t\t\tonControlTap(e) {\r\n\t\t\t\tif (e.controlId === 1) {\r\n\t\t\t\t\tuni.navigateTo({ url: '/pages/map/search' });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 返回逻辑\r\n\t\t\tgoBack(){\r\n\t\t\t\tif (this.sourcePage === 'cart') {\r\n\t\t\t\t  // 从购物车跳转来时，正常返回\r\n\t\t\t\t  uni.navigateBack({ delta: 1 });\r\n\t\t\t\t} else {\r\n\t\t\t\t  // 其他来源（如主页）使用重定向\r\n\t\t\t\t  uni.redirectTo({ url: '/pages/index/index' });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\t\n</script>\n\n<style>\r\n\t.back{\r\n\t\tdisplay: flex;\r\n\t\tposition: fixed;\r\n\t\ttop: 100rpx;\r\n\t\tleft: 20rpx;\r\n\t\tz-index: 1000;\r\n\t\tbackground-color: #f4f4f4;\r\n\t\tborder-radius: 50%;\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.1);\r\n\t}\r\n\t\r\n\t.back-image{\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t}\r\n\t\r\n\t.back:active{\r\n\t\ttransform: scale(0.95);\r\n\t\tbackground-color: rgba(240,240,240,0.9);\r\n\t}\r\n\t\r\n\t.map-container {\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t}\r\n\t\r\n\t.locate-btn {\r\n\t\tposition: fixed;\r\n\t\tright: 30rpx;\r\n\t\tbottom: 250rpx;\r\n\t\twidth: 90rpx;\r\n\t\theight: 90rpx;\r\n\t\tbackground: white;\r\n\t\tborder-radius: 50%;\r\n\t\tbox-shadow: 0 0 10px rgba(0,0,0,0.2);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tz-index: 100;\r\n\t}\r\n\t\r\n\t.locate-icon {\r\n\t\twidth: 50rpx;\r\n\t\theight: 50rpx;\r\n\t}\r\n\t\r\n\t.locate-image {\r\n\t\twidth: 50rpx;\r\n\t\theight: 50rpx;\r\n\t\tz-index: 400;\r\n\t}\r\n\t\r\n\t.address-bar {\r\n\t\tposition: fixed;\r\n\t\tbottom: 140rpx;\r\n\t\tleft: 30rpx;\r\n\t\tright: 30rpx;\r\n\t\tbackground: rgba(255, 255, 255, 0.9);\r\n\t\tpadding: 25rpx 30rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\tbox-shadow: 0 4rpx 20rpx rgba(0,0,0,0.1);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tz-index: 100;\r\n\t}\r\n\t\r\n\t.address-icon {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tmargin-right: 15rpx;\r\n\t}\r\n\t\r\n\t.address-text {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #333;\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.search-results {\r\n\t\tposition: fixed;\r\n\t\tbottom: 140rpx;\r\n\t\tleft: 30rpx;\r\n\t\tright: 30rpx;\r\n\t\tbackground: white;\r\n\t\tborder-radius: 16rpx;\r\n\t\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.15);\r\n\t\tz-index: 1000;\r\n\t\tmax-height: 60vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t\r\n\t.results-scroll {\r\n\t\tflex: 1;\r\n\t\tmax-height: calc(60vh - 80rpx);\r\n\t}\r\n\t\r\n\t.result-item {\r\n\t\tpadding: 25rpx 30rpx;\r\n\t\tborder-bottom: 1rpx solid #f0f0f0;\r\n\t}\r\n\t\r\n\t.result-item:active {\r\n\t\tbackground-color: #f9f9f9;\r\n\t}\r\n\t\r\n\t.result-title {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 8rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.result-address {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #888;\r\n\t}\r\n\t\r\n\t.close-results {\r\n\t\theight: 80rpx;\r\n\t\tline-height: 80rpx;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #1A73E8;\r\n\t\tborder-top: 1rpx solid #f0f0f0;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.map-watermark {\r\n\t\tposition: fixed;\r\n\t\tbottom: 30rpx;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tz-index: 50;\r\n\t}\r\n\t\r\n\t.map-watermark text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: rgba(0, 0, 0, 0.5);\r\n\t\tline-height: 1.5;\r\n\t}\n</style>","import MiniProgramPage from 'D:/xiaochengxu/project-space/uni-杏林春暖/pages/map/map.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","options","uni","e","value","keyword","res","error","item","fullAddress","address","lat","lng","pages","prevPage","err","settingRes","errorMsg","MiniProgramPage"],"mappings":"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"}