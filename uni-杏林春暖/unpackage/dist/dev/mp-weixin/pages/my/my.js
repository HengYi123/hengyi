"use strict";const e=require("../../common/vendor.js"),r=require("../../common/assets.js"),m={data(){return{showAuthPopup:!1,tempAvatar:"",tempNickname:"",userInfo:{address:e.index.getStorageSync("selectedAddress")||""},orderItems:[{name:"待付款",icon:"/static/my/待付款.png"},{name:"待收货",icon:"/static/my/待收货.png"},{name:"待评价",icon:"/static/my/待评价.png"},{name:"退换/售后",icon:"/static/my/退换.png"},{name:"全部订单",icon:"/static/my/订单.png"}],settingItems:[{name:"客户服务",icon:"/static/my/客服中心.png"},{name:"消息中心",icon:"/static/my/消息中心.png"},{name:"商品收藏",icon:"/static/my/商品收藏.png"},{name:"我的足迹",icon:"/static/my/我的足迹.png"},{name:"设置",icon:"/static/my/设置.png"}]}},onLoad(){e.index.$on("updateUserAddress",this.updateAddress);const s=e.index.getStorageSync("selectedAddress");s&&(this.userInfo.address=s)},onUnload(){e.index.$off("updateUserAddress",this.updateAddress)},methods:{navigateToMap(){e.index.navigateTo({url:"/pages/map/map?source=my&address="+encodeURIComponent(this.userInfo.address||"")})},toZanZhu(){e.index.navigateTo({url:"/pages/my/zanZhu"})},updateAddress(s){this.userInfo.address=s,e.index.setStorageSync("selectedAddress",s)},selectAvatar(){e.index.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:s=>{const o=s.tempFilePaths;o.length>0&&(this.tempAvatar=o[0],e.index.showToast({title:"头像已选择",icon:"success"}))},fail:s=>{e.index.__f__("error","at pages/my/my.vue:184","选择头像失败",s),e.index.showToast({title:"选择头像失败",icon:"none"})}})},saveNickname(s){this.tempNickname=s.detail.value},confirmAuth(){if(!this.tempNickname){e.index.showToast({title:"请设置昵称",icon:"none"});return}this.userInfo={avatarUrl:this.tempAvatar||"/static/my/用户头像.png",nickName:this.tempNickname,openid:"wx_"+Date.now().toString().slice(-6)},this.showAuthPopup=!1,e.index.showToast({title:"授权成功",icon:"success"})}}};if(!Array){const s=e.resolveComponent("my-nav-bar"),o=e.resolveComponent("my-tab-bar");(s+o)()}const p=()=>"../../components/my-nav-bar/my-nav-bar.js",u=()=>"../../components/my-tab-bar/my-tab-bar.js";Math||(p+u)();function d(s,o,y,_,n,a){return e.e({a:e.p({title:"我的"}),b:n.userInfo.avatarUrl||"/static/my/用户头像.png",c:e.o(t=>n.showAuthPopup=!0),d:e.t(n.userInfo.nickName||"未登录"),e:e.t(n.userInfo.openid||"无"),f:e.t(n.userInfo.address||"请设置"),g:r._imports_0$1,h:e.o((...t)=>a.navigateToMap&&a.navigateToMap(...t)),i:e.f(n.orderItems,(t,i,c)=>({a:t.icon,b:e.t(t.name)})),j:e.f(n.settingItems,(t,i,c)=>({a:t.icon,b:e.t(t.name)})),k:e.o((...t)=>a.toZanZhu&&a.toZanZhu(...t)),l:n.showAuthPopup},n.showAuthPopup?{m:e.o(t=>n.showAuthPopup=!1),n:n.tempAvatar||"/static/my/用户头像.png",o:e.o((...t)=>a.selectAvatar&&a.selectAvatar(...t)),p:e.o((...t)=>a.saveNickname&&a.saveNickname(...t)),q:n.tempNickname,r:e.o(t=>n.tempNickname=t.detail.value),s:e.o(t=>n.showAuthPopup=!1),t:e.o((...t)=>a.confirmAuth&&a.confirmAuth(...t))}:{},{v:r._imports_1$1})}const h=e._export_sfc(m,[["render",d],["__scopeId","data-v-2f1ef635"]]);wx.createPage(h);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/my/my.js.map
